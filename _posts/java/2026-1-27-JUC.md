---
layout:     post
title:      "JUC"
subtitle:   " \"一百天也要学完JUC\""
date:       2026-1-27 12:00:00
author:     "HZY"
header-img: ""
catalog: true
tags:
    - Java
---

## Part 1 
### 预备知识
##### 进程与线程
* 进程的概念:

* 线程的概念:

* 对比:
    * 进程几乎相互独立
    * 进程内数据，可供内部线程共享
    * 进程间通信复杂
    * 线程通信相对简单
    * 线程更加轻量级

##### 并行与并发
* 操作系统的任务调度器
    * 对于单核的cpu:微观串行,宏观并行
    * 多核cpu
* 并发: 同一时间应对多件事情的能力
* 并行: 同一时间动手做多件事情的能力

##### 同步与异步
* 同步
* 异步

### 线程
##### Thread
* 直接使用Thread
* `Thread`与`Runnable`

``` java
@Test
public void test02() throws InterruptedException {
    Thread thread = new Thread(
            ()-> cout.print("我启动了")
            //cout是作者自定义的一个red_printer
    ) ;
    thread.setName("thread2");
    thread.start();

    thread.join();
}
```

* `FutureTask`实现了`Runnable`接口，所以也可以扔给task
    * `task.get()`会阻塞线程直到拿到值

``` java
@Test
public void test03() throws InterruptedException, ExecutionException {
    FutureTask<String > task = new FutureTask(()->{
        cout.print("我也喜欢你");
        return "这是我的答案！！！love you too";
    });

    Thread thread = new Thread(task);
    thread.setName("表白线程");

    thread.start();
    System.out.println("我喜欢你，可以给我答复吗");
    cout.print( task.get());
}
```

##### 进程命令
``` bash
tasklist   
taskkill 

jps  #查看所有java线程
jstack <PID>  #查看某个java进程的所有线程状态
jconsole   #查看某个java进程中线程的运行情况
```

##### 线程运行原理

* 栈:
    * 栈帧:
* 堆:
* 方法区 

* 栈帧图解:
* 线程上下文切换:
    * 线程数过多，频繁切换上下文会使得效率变低

##### 常见方法
``` java
run();
join();
getId();
getName();
getState();
isInterrupted();
isAlive();
interrupt();
interrupter();
Thread.currentThread();
sleep();
yield();
```